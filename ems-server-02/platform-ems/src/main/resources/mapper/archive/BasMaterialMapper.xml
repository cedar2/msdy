<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.platform.ems.mapper.BasMaterialMapper">

    <resultMap type="com.platform.ems.domain.BasMaterial" id="BasMaterialResult">
        <result property="clientId" column="client_id"/>
        <result property="materialSid" column="material_sid"/>
        <result property="materialCode" column="material_code"/>
        <result property="materialName" column="material_name"/>
        <result property="materialType" column="material_type"/>
        <result property="materialTypeName" column="material_type_name"/>
        <result property="industryField" column="industry_field"/>
        <result property="materialClassSid" column="material_class_sid"/>
        <result property="season" column="season"/>
        <result property="supplierProductCode" column="supplier_product_code"/>
        <result property="unitBase" column="unit_base"/>
        <result property="unitBaseName" column="unit_base_name"/>
        <result property="yarnCount" column="yarn_count"/>
        <result property="density" column="density"/>
        <result property="composition" column="composition"/>
        <result property="purchaseType" column="purchase_type"/>
        <result property="purchaseTypeName" column="purchase_type_name"/>
        <result property="specificationSize" column="specification_size"/>
        <result property="zipperMonth" column="zipper_month"/>
        <result property="zipperSize" column="zipper_size"/>
        <result property="materialComposition" column="material_composition"/>
        <result property="vendorSid" column="vendor_sid"/>
        <result property="upstreamSupplier" column="upstream_supplier"/>
        <result property="developer" column="developer"/>
        <result property="weaveProcess" column="weave_process"/>
        <result property="dyeType" column="dye_type"/>
        <result property="width" column="width"/>
        <result property="gramWeight" column="gram_weight"/>
        <result property="specialFinishing" column="special_finishing"/>
        <result property="modelSize" column="model_size"/>
        <result property="tagDesc" column="tag_desc"/>
        <result property="processDesc" column="process_desc"/>
        <result property="functionRemark" column="function_remark"/>
        <result property="productSid" column="product_sid"/>
        <result property="productCategory" column="product_category"/>
        <result property="riskRemark" column="risk_remark"/>
        <result property="processSid" column="process_sid"/>
        <result property="isCompositeMaterial" column="is_composite_material"/>
        <result property="calicoYarnDescription" column="calico_yarn_description"/>
        <result property="specialCraft" column="special_craft"/>
        <result property="selfDetectRemark" column="self_detect_remark"/>
        <result property="zipperFlag" column="zipper_flag"/>
        <result property="materialCategory" column="material_category"/>
        <result property="isSkuMaterial" column="is_sku_material"/>
        <result property="isKuaifankuan" column="is_kuaifankuan"/>
        <result property="skuDimension" column="sku_dimension"/>
        <result property="sku1Type" column="sku1_type"/>
        <result property="sku2Type" column="sku2_type"/>
        <result property="priceType" column="price_type"/>
        <result property="costType" column="cost_type"/>
        <result property="sampleCodeSelf" column="sample_code_self"/>
        <result property="productSeasonSid" column="product_season_sid"/>
        <result property="sampleCodeVendor" column="sample_code_vendor"/>
        <result property="sampleCodeCustomer" column="sample_code_customer"/>
        <result property="retailPrice" column="retail_price"/>
        <result property="customerProductCode" column="customer_product_code"/>
        <result property="simpleCode" column="simple_code"/>
        <result property="cycleStage" column="cycle_stage"/>
        <result property="companySid" column="company_sid"/>
        <result property="groupType" column="group_type"/>
        <result property="designerAccount" column="designer_account"/>
        <result property="style" column="style"/>
        <result property="series" column="series"/>
        <result property="kuanType" column="kuan_type"/>
        <result property="styleDetail" column="style_detail"/>
        <result property="seriesDetail" column="series_detail"/>
        <result property="kuanTypeDetail" column="kuan_type_detail"/>
        <result property="waveBand" column="wave_band"/>
        <result property="projectSid" column="project_sid"/>
        <result property="customerSid" column="customer_sid"/>
        <result property="modelSid" column="model_sid"/>
        <result property="collarType" column="collar_type"/>
        <result property="sleeveType" column="sleeve_type"/>
        <result property="ageGroup" column="age_group"/>
        <result property="inOutUnder" column="in_out_under"/>
        <result property="topic" column="topic"/>
        <result property="mainFabricType" column="main_fabric_type"/>
        <result property="customerVendorCoopModel" column="customer_vendor_coop_model"/>
        <result property="priceGroup" column="price_group"/>
        <result property="discountType" column="discount_type"/>
        <result property="discountTypeName" column="discount_type_name"/>
        <result property="discountRate" column="discount_rate"/>
        <result property="productRouting" column="product_routing"/>
        <result property="productType" column="product_type"/>
        <result property="priceCostTax" column="price_cost_tax"/>
        <result property="costTargetTax" column="cost_target_tax"/>
        <result property="nationalStandardCode" column="national_standard_code"/>
        <result property="featureTag" column="feature_tag"/>
        <result property="dna" column="dna"/>
        <result property="craft" column="craft"/>
        <result property="patternFlower" column="pattern_flower"/>
        <result property="specialType" column="special_type"/>
        <result property="footMouth" column="foot_mouth"/>
        <result property="sellPointDesc" column="sell_point_desc"/>
        <result property="spreadType" column="spread_type"/>
        <result property="spreadField" column="spread_field"/>
        <result property="customerGroup" column="customer_group"/>
        <result property="materialSidInitial" column="material_sid_initial"/>
        <result property="sampleCodeSelfInitial" column="sample_code_self_initial"/>
        <result property="waistHeight" column="waist_height"/>
        <result property="elasticityIndex" column="elasticity_index"/>
        <result property="thickIndex" column="thick_index"/>
        <result property="odmOem" column="odm_oem"/>
        <result property="businessChannel" column="business_channel  "/>
        <result property="maleFemaleFlag" column="male_female_flag"/>
        <result property="grade" column="grade"/>
        <result property="executiveStandard" column="executive_standard"/>
        <result property="executiveStandardBottoms" column="executive_standard_bottoms"/>
        <result property="picturePath" column="picture_path"/>
        <result property="picturePathSecond" column="picture_path_second"/>
        <result property="remark" column="remark"/>
        <result property="status" column="status"/>
        <result property="handleStatus" column="handle_status"/>
        <result property="wpcRemindDays" column="wpc_remind_days"/>
        <result property="creatorAccount" column="creator_account"/>
        <result property="createDate" column="create_date"/>
        <result property="updaterAccount" column="updater_account"/>
        <result property="updateDate" column="update_date"/>
        <result property="confirmerAccount" column="confirmer_account"/>
        <result property="confirmDate" column="confirm_date"/>
        <result property="dataSourceSys" column="data_source_sys"/>
        <result property="safeCategory" column="safe_category"/>
        <result property="companyName" column="company_name"/>
        <result property="companyCode" column="company_code"/>
        <result property="companyBrandName" column="company_brand_name"/>
        <result property="companyBrandCode" column="company_brand_code"/>
        <result property="customerName" column="customer_name"/>
        <result property="customerCode" column="customer_code"/>
        <result property="customerBrandName" column="customer_brand_name"/>
        <result property="customerBrandCode" column="customer_brand_code"/>
        <result property="modelName" column="model_name"/>
        <result property="modelCode" column="model_code"/>
        <result property="standardSku" column="standard_sku"/>
        <result property="downStandardSku" column="down_standard_sku"/>
        <result property="productSeasonName" column="product_season_name"/>
        <result property="productSeasonCode" column="product_season_code"/>
        <result property="nodeName" column="node_name"/>
        <result property="nodeCode" column="node_code"/>
        <result property="vendorName" column="vendor_name"/>
        <result property="vendorCode" column="vendor_code"/>
        <result property="companyBrandSid" column="company_brand_sid"/>
        <result property="customerBrandSid" column="customer_brand_sid"/>
        <result property="productTechniqueType" column="product_technique_type"/>
        <result property="productTechniqueTypeName" column="product_technique_type_name"/>
        <result property="unitQuantity" column="unit_quantity"/>
        <result property="unitQuantityName" column="unit_quantity_name"/>
        <result property="upDownSuit" column="up_down_suit"/>
        <result property="rawMaterialMode" column="raw_material_mode"/>
        <result property="unitPrice" column="unit_price"/>
        <result property="unitPriceName" column="unit_price_name"/>
        <result property="unitRecursion" column="unit_recursion"/>
        <result property="unitRecursionName" column="unit_recursion_name"/>
        <result property="unitConversionRatePrice" column="unit_conversion_rate_price"/>
        <result property="processCode" column="process_code"/>
        <result property="processName" column="process_name"/>
        <result property="manualMaterialCode" column="manual_material_code"/>
        <result property="unitConversionRate" column="unit_conversion_rate"/>
        <result property="quotePriceTax" column="quote_price_tax"/>
        <result property="minOrderQuantity" column="min_order_quantity"/>
        <result property="requestQuotationSid" column="request_quotation_sid"/>
        <result property="priceInforItemSid" column="price_infor_item_sid"/>
        <result property="taxRate" column="tax_rate"/>
        <result property="taxRateValue" column="tax_rate_value"/>
        <result property="confirmerAccountName" column="confirmer_account_name"/>
        <result property="updaterAccountName" column="updater_account_name"/>
        <result property="creatorAccountName" column="creator_account_name"/>
        <result property="priceDimension" column="price_dimension"/>
        <result property="touseProduceStage" column="touse_produce_stage"/>
        <result property="touseProduceStageName" column="touse_produce_stage_name"/>
        <result property="isCreateBom" column="is_create_bom"/>
        <result property="isCreateFromSample" column="is_create_from_sample"/>
        <result property="designerAccountName" column="designer_account_name"/>
        <result property="isCreateProductcost" column="is_create_productcost"/>
        <result property="isCreateProductLine" column="is_create_product_line"/>
        <result property="isHasCreatedBom" column="is_has_created_bom"/>
        <result property="isHasCreatedProductcost" column="is_has_created_productcost"/>
        <result property="isHasCreatedProductLine" column="is_has_created_product_line"/>
        <result property="buOperator" column="bu_operator"/>
        <result property="buOperatorName" column="bu_operator_name"/>
        <result property="buOperatorVendor" column="bu_operator_vendor"/>
        <result property="buOperatorCustomer" column="bu_operator_customer"/>
        <result property="productPlanSid" column="product_plan_sid"/>
        <result property="osbSampleBuyer" column="osb_sample_buyer"/>
        <result property="osbSampleBuyerName" column="osb_sample_buyer_name"/>
        <result property="purchaseDate" column="purchase_date"/>
        <result property="purchaseCompany" column="purchase_company"/>
        <result property="purchaseCompanyName" column="purchase_company_name"/>
        <result property="purchaseOrg" column="purchase_org"/>
        <result property="purchaseOrgName" column="purchase_org_name"/>
        <result property="purchaseFrom" column="purchase_from"/>
        <result property="osbSampleBrand" column="osb_sample_brand"/>
        <result property="osbSampleCode" column="osb_sample_code"/>
        <result property="osbSampleColor" column="osb_sample_color"/>
        <result property="osbSampleSize" column="osb_sample_size"/>
        <result property="purchasePrice" column="purchase_price"/>
        <result property="currency" column="currency"/>
        <result property="currencyUnit" column="currency_unit"/>
        <result property="purchaseQuantity" column="purchase_quantity"/>
        <result property="reimburseStatus" column="reimburse_status"/>
        <result property="customerShortName" column="customer_short_name"/>
        <result property="vendorShortName" column="vendor_short_name"/>
        <result property="materialClassName" column="material_class_name"/>
        <result property="filePath" column="file_path"/>
        <result property="isHasCreatedSku1" column="is_has_created_sku1"/>
        <result property="isHasCreatedSku2" column="is_has_created_sku2"/>
        <result property="sku1GroupSid" column="sku1_group_sid"/>
        <result property="sku2GroupSid" column="sku2_group_sid"/>
        <result property="sku1GroupCode" column="sku1_group_code"/>
        <result property="sku2GroupCode" column="sku2_group_code"/>
        <result property="inventoryPriceMethod" column="inventory_price_method"/>
        <result property="inventoryStandardPrice" column="inventory_standard_price"/>
        <result property="producePlantSid" column="produce_plant_sid"/>
        <result property="producePlantCode" column="produce_plant_code"/>
        <result property="producePlantName" column="produce_plant_name"/>
        <result property="producePlantShortName" column="produce_plant_short_name"/>
    </resultMap>

    <sql id="selectBasMaterialVo">
        SELECT
	t.client_id,
	t.material_sid,
	t.material_code,
	t.material_name,
	t.unit_quantity,
	t14.name AS unit_quantity_name,
	t.up_down_suit,
	t.raw_material_mode,
    t.rad_status,t.is_popularize_product,
	t.material_type,
	t11.name AS material_type_name,
	t.industry_field,
	t.material_class_sid,
    t.big_class_sid,
    t.big_class_code,
    t.middle_class_sid,
    t.middle_class_code,
    t.small_class_sid,
    t.small_class_code,
	t.product_technique_type,
	t16.name AS product_technique_type_name,
	t.season,
	t.supplier_product_code,
	t.unit_base,
	t12.name AS unit_base_name,
	IFNULL(t12.rounding_type,'SSWR') as rounding_type,
	t.yarn_count,
	t.density,
	t.composition,
	t.purchase_type,
	t13.name AS purchase_type_name,
	t.specification_size,
	t.zipper_month,
	t.zipper_size,
	t.material_composition,
	t.vendor_sid,
	t.process_sid,
	t.upstream_supplier,
	t.developer,
	t.weave_process,
	t.dye_type,
	t.width,
	t.gram_weight,
	t.special_finishing,
	t.model_size,
	t.tag_desc,
	t.process_desc,
    t.function_remark,
	t.product_sid,
	t.product_category,
	t.risk_remark,
	t.is_composite_material,
	t.calico_yarn_description,
	t.special_craft,
	t.self_detect_remark,
	t.zipper_flag,
	t.material_category,
	t.is_sku_material,
    t.is_kuaifankuan,
	t.sku_dimension,
	t.sku1_type,
	t.sku2_type,
	t.price_type,
	t.cost_type,
	t.sample_code_self,
	t.product_season_sid,
	t.sample_code_vendor,
	t.sample_code_customer,
	t.retail_price,
	t.customer_product_code,
	t.simple_code,
	t.cycle_stage,
	t.company_sid,
	t.company_brand_sid,
	t.group_type,
	t.designer_account,
    t24.nick_name AS designer_account_name,
	t.style,
	t.series,
	t.kuan_type,
	t.style_detail,
	t.series_detail,
	t.kuan_type_detail,
	t.wave_band,
	t.project_sid,
	t.customer_sid,
	t.customer_brand_sid,
	t.model_sid,
    t.produce_plant_sid,
    t.produce_plant_code,
	t.collar_type,
	t.sleeve_type,
	t.age_group,
	t.in_out_under,
	t.topic,
	t.main_fabric_type,
	t.customer_vendor_coop_model,
	t.price_group,
	t.discount_type,
	t17.name AS discount_type_name,
	t.discount_rate,
	t.product_routing,
	t.product_type,
	t.price_cost_tax,
	t.cost_target_tax,
	t.national_standard_code,
	t.feature_tag,
	t.dna,
	t.craft,
	t.pattern_flower,
	t.special_type,
	t.foot_mouth,
	t.sell_point_desc,
	t.spread_type,
	t.spread_field,
	t.customer_group,
	t.material_sid_initial,
	t.sample_code_self_initial,
	t.waist_height,
	t.elasticity_index,
	t.thick_index,
	t.odm_oem,
	t.business_channel,
	t.male_female_flag,
	t.grade,
	t.executive_standard,
	t.executive_standard_bottoms,
    t.quote_price_tax,
    t.min_order_quantity,
	t.picture_path,
    t.picture_path_second,
    t.is_upload_zhizaodan,
    t.is_has_uploaded_zhizaodan,
    t.zhizaodan_upload_date,
    t.touse_produce_stage,
    t.is_create_bom,
    t.is_create_from_sample,
    t.is_create_productcost,
    t.is_create_product_line,
    t.is_has_created_bom,
    t.is_has_created_productcost,
    t.is_has_created_product_line,
    t.bu_operator,
    t27.nick_name AS bu_operator_name,
    t.bu_operator_vendor,
    t.bu_operator_customer,
    t23.name AS touse_produce_stage_name,
    t.product_plan_sid,
    t.osb_sample_buyer,
    t28.nick_name AS osb_sample_buyer_name,
    t.purchase_date,
    t.purchase_company,
    t30.company_name AS purchase_company_name,
    t.purchase_org,
    t29.department_name AS purchase_org_name,
    t.purchase_from,
    t.osb_sample_brand,
    t.osb_sample_code,
    t.osb_sample_color,
    t.osb_sample_size,
    t.purchase_price,
    t.currency,
    t.currency_unit,
    t.purchase_quantity,
    t.reimburse_status,
	t.remark,
	t.status,
	t.handle_status,
    t.wpc_remind_days,
	t.creator_account,
	t.create_date,
	t.updater_account,
	t.update_date,
	t.confirmer_account,
	t.confirm_date,
	t.data_source_sys,
	t.safe_category,
	t.unit_price,
    t.unit_recursion,
    t.unit_conversion_rate_price,
    t.sku1_group_sid,
    t.sku2_group_sid,
    t.sku1_group_code,
    t.sku2_group_code,
    d1.dict_label as material_category_name,
    t19.sku_group_name as sku2_group_name,
    t.inventory_price_method,
    t.inventory_standard_price,
    t.company_brand_mark_sid,
	t15.name AS unit_price_name,
    t18.name AS unit_recursion_name,
	t.manual_material_code,
	t.unit_conversion_rate,
	t1.company_name,
    ifnull(t1.short_name, t1.company_name) as company_short_name,
	t1.company_code,
	t2.brand_name AS company_brand_name,
	t2.brand_code AS company_brand_code,
	t3.model_name,
	t3.model_code,
	t3.standard_sku,
	t3.down_standard_sku,
	t3.model_type,
	t4.customer_name,
	t4.customer_code,
	t5.brand_name AS customer_brand_name,
	t5.brand_code AS customer_brand_code,
	t6.product_season_name,
	t6.product_season_code,
	t7.vendor_name,
	t7.vendor_code,
	t8.node_name,
    t8.node_name AS material_class_name,
	t8.node_code,
    t9.plant_name as produce_plant_name,
    t9.short_name as produce_plant_short_name,
	t10.process_code,
	t10.process_name,
	t20.nick_name AS creator_account_name,
    t21.nick_name AS updater_account_name,
    t22.nick_name AS confirmer_account_name,
    t.price_dimension,
    ifnull(t4.short_name,t4.customer_name) as customer_short_name,
    t7.short_name AS vendor_short_name,
    t31.file_path,
    if(t32.material_sid is null,'N','Y') AS is_has_created_sku1,
    if(t33.material_sid is null,'N','Y') AS is_has_created_sku2,
    t34.brand_mark_name AS company_brand_mark_name,
    t8a.node_name as big_class_name,
    t8b.node_name as middle_class_name,
    t8c.node_name as small_class_name
FROM
	s_bas_material t
    LEFT JOIN sys_dict_data d1 ON d1.dict_type = 's_material_category' AND d1.dict_value = t.material_category
	LEFT JOIN s_bas_company t1 ON t1.company_sid = t.company_sid
	LEFT JOIN s_bas_company_brand t2 ON t2.company_brand_sid = t.company_brand_sid
	LEFT JOIN s_tec_model t3 ON t3.model_sid = t.model_sid
	LEFT JOIN s_bas_customer t4 ON t4.customer_sid = t.customer_sid
	LEFT JOIN s_bas_customer_brand t5 ON t5.customer_brand_sid = t.customer_brand_sid
	LEFT JOIN s_bas_product_season t6 ON t6.product_season_sid = t.product_season_sid
	LEFT JOIN s_bas_vendor t7 ON t7.vendor_sid = t.vendor_sid
	LEFT JOIN s_con_material_class t8 ON t8.material_class_sid = t.material_class_sid
    LEFT JOIN s_con_material_class t8a ON t8a.material_class_sid = t.big_class_sid
    LEFT JOIN s_con_material_class t8b ON t8b.material_class_sid = t.middle_class_sid
    LEFT JOIN s_con_material_class t8c ON t8c.material_class_sid = t.small_class_sid
    LEFT JOIN s_bas_plant t9 ON t.produce_plant_sid = t9.plant_sid
	LEFT JOIN s_man_process t10 ON t10.process_sid = t.process_sid
	LEFT JOIN s_con_material_type t11 ON t11.code = t.material_type
	LEFT JOIN s_con_measure_unit t12 ON t12.code = t.unit_base
	LEFT JOIN s_con_purchase_type t13 ON t13.code = t.purchase_type
	LEFT JOIN s_con_measure_unit t14 ON t14.code = t.unit_quantity
	LEFT JOIN s_con_measure_unit t15 ON t15.code = t.unit_price
	LEFT JOIN s_con_product_technique_type t16 ON t16.code = t.product_technique_type
	LEFT JOIN s_con_discount_type t17 ON t17.code = t.discount_type
    LEFT JOIN s_con_measure_unit t18 ON t.unit_recursion = t18.code
    LEFT JOIN s_bas_sku_group t19 ON t.sku2_group_sid = t19.sku_group_sid
	LEFT JOIN sys_user t20 ON t.creator_account = t20.user_name
    LEFT JOIN sys_user t21 ON t.updater_account = t21.user_name
    LEFT JOIN sys_user t22 ON t.confirmer_account = t22.user_name
    LEFT JOIN s_con_produce_stage t23 ON t.touse_produce_stage = t23.code
    LEFT JOIN sys_user t24 ON t.designer_account = t24.user_name
	LEFT JOIN sys_user t27 ON t.bu_operator = t27.user_name
    LEFT JOIN sys_user t28 ON t.osb_sample_buyer = t28.user_name
    LEFT JOIN s_bas_department t29 ON t.purchase_org = t29.department_sid
    LEFT JOIN s_bas_company t30 ON t.purchase_company = t30.company_sid
    LEFT JOIN s_bas_material_attachment t31 ON t.material_sid = t31.material_sid and 'GYD' = t31.file_type
    LEFT JOIN (SELECT ta.material_sid from s_bas_material ta
               WHERE EXISTS (select tb.material_sku_sid FROM s_bas_material_sku tb WHERE ta.material_sid = tb.material_sid and ta.sku1_type = tb.sku_type)) t32 on t.material_sid = t32.material_sid
    LEFT JOIN (SELECT ta.material_sid from s_bas_material ta
               WHERE EXISTS (select tb.material_sku_sid FROM s_bas_material_sku tb WHERE ta.material_sid = tb.material_sid and ta.sku2_type = tb.sku_type)) t33 on t.material_sid = t33.material_sid
    LEFT JOIN s_bas_company_brand_mark t34 ON t34.brand_mark_sid = t.company_brand_mark_sid
    </sql>

    <select id="selectBasMaterialById" parameterType="java.lang.Long" resultMap="BasMaterialResult">
        <include refid="selectBasMaterialVo"/>
        where t.material_sid = #{materialSid}
    </select>

    <resultMap type="com.platform.ems.domain.dto.response.BasMaterialPicture" id="BasMaterialPictureResult">
        <result property="materialSid" column="material_sid"/>
        <result property="materialCode" column="material_code"/>
        <result property="materialName" column="material_name"/>
        <result property="picturePath" column="picture_path"/>
        <result property="picturePathSecond" column="picture_path_second"/>
        <collection property="attachmentList" ofType="com.platform.ems.domain.dto.response.BasMaterialPicture$BasMaterialVideo">
            <result property="materialAttachmentSid" column="material_attachment_sid"/>
            <result property="fileType" column="file_type"/>
            <result property="fileName" column="file_name"/>
            <result property="filePath" column="file_path"/>
        </collection>
    </resultMap>

    <select id="selectBasMaterialPicture" parameterType="java.lang.Long" resultMap="BasMaterialPictureResult">
        select t.material_sid, t.material_code, t.material_name,
               t.picture_path, t.picture_path_second,
               t1.material_attachment_sid,
               t1.file_type,
               t1.file_name,
               t1.file_path
        from s_bas_material t
        left join s_bas_material_attachment t1 on t.material_sid = t1.material_sid AND t1.file_type = 'SP'
        where t.material_sid = #{materialSid}
    </select>

    <select id="selectBasMaterialBomById" parameterType="java.lang.Long" resultMap="BasMaterialResult">
     select
     t.vendor_sid,
     t.supplier_product_code,
     t.material_code,
	 t.material_name,
     t.min_order_quantity,
     t.unit_quantity,
     t.unit_price,
     t.unit_recursion,
     t.unit_conversion_rate_price,
     t.picture_path,
     t.width,
     t.unit_base,
     t.status,
     t.gram_weight,
     t.touse_produce_stage,
     t.yarn_count,
     t.density,
     t.composition,
     t.specification_size,
     t.material_composition,
     t.purchase_type,
     t2.name AS unit_base_name,
     t3.name AS unit_quantity_name,
     t4.name AS unit_price_name,
     t5.name AS purchase_type_name,
     t6.vendor_name,
     t.material_type,
     t7.name as material_type_name,
     t8.name as product_technique_type_name,
     t9.node_name,
     t10.name as unit_recursion_name
     FROM
	s_bas_material t
    LEFT JOIN s_con_measure_unit t2 ON t2.code = t.unit_base
    LEFT JOIN s_con_measure_unit t3 ON t3.code = t.unit_quantity
	LEFT JOIN s_con_measure_unit t4 ON t4.code = t.unit_price
	LEFT JOIN s_con_purchase_type t5 ON t5.code = t.purchase_type
	left join s_bas_vendor t6 on t6.vendor_sid=t.vendor_sid
	LEFT JOIN s_con_material_type t7 ON t7.code = t.material_type
	left join  s_con_product_technique_type t8 on t8.code=t.product_technique_type
	LEFT JOIN s_con_material_class t9 ON t9.material_class_sid = t.material_class_sid
    LEFT JOIN s_con_measure_unit t10 ON t.unit_recursion = t10.code
	 where t.material_sid = #{materialSid}
    </select>

    <select id="selectBasMaterialList" parameterType="com.platform.ems.domain.BasMaterial"
            resultMap="BasMaterialResult">
        <include refid="selectBasMaterialVo"/>
        <where>
            <if test="groupTypeList != null and groupTypeList.length >0">
                and t.group_type in
                (<foreach collection="groupTypeList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="bigClassSidList != null and bigClassSidList.length >0">
                and t.big_class_sid in
                (<foreach collection="bigClassSidList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="middleClassSidList != null and middleClassSidList.length >0">
                and t.middle_class_sid in
                (<foreach collection="middleClassSidList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="smallClassSidList != null and smallClassSidList.length >0">
                and t.small_class_sid in
                (<foreach collection="smallClassSidList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="isPicture != null and isPicture == 'WZT'.toString()">
                and t.picture_path is null
            </if>
            <if test="isPicture != null and isPicture == 'YZT'.toString()">
                and t.picture_path is not null
            </if>
            <if test="isPicture != null and isPicture == 'WFT'.toString()">
                and t.picture_path_second is null
            </if>
            <if test="isPicture != null and isPicture == 'YFT'.toString()">
                and t.picture_path_second is not null
            </if>
            <if test="isPicture != null and isPicture == 'WST'.toString()">
                and not exists (select a.material_sid from s_bas_material_sku a where a.material_sid = t.material_sid and a.picture_path is not null)
            </if>
            <if test="isPicture != null and isPicture == 'YST'.toString()">
                and exists (select a.material_sid from s_bas_material_sku a where a.material_sid = t.material_sid and a.picture_path is not null)
            </if>
            <if test="sku2GroupSid != null">
                and t.sku2_group_sid = #{sku2GroupSid}
            </if>
            <if test="sku2GroupSidList != null and sku2GroupSidList.length >0 ">
                and t.sku2_group_sid in
                (<foreach collection="sku2GroupSidList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="inventoryPriceMethod != null and inventoryPriceMethod != ''">
                and (<foreach collection="inventoryPriceMethod.split(';')" item="item" separator="or">
                t.inventory_price_method = #{item}</foreach>)
            </if>
            <if test="inventoryPriceMethodList != null and inventoryPriceMethodList.length >0 ">
                and t.inventory_price_method in
                (<foreach collection="reimburseStatusList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="materialCodeName != null and materialCodeName != ''">
                and (<foreach collection="materialCodeName.split(';')" item="materialCodeName" separator="or">
                t.material_code like concat('%', #{materialCodeName}, '%') or t.material_name like concat('%', #{materialCodeName}, '%')</foreach>)
            </if>
            <if test="isHasCreatedSku1 != null and isHasCreatedSku1 != '' and isHasCreatedSku1 == 'Y'.toString()">
                and t32.material_sid is not null
            </if>
            <if test="isHasCreatedSku1 != null and isHasCreatedSku1 != '' and isHasCreatedSku1 == 'N'.toString()">
                and t32.material_sid is null
            </if>
            <if test="isHasCreatedSku2 != null and isHasCreatedSku2 != '' and isHasCreatedSku2 == 'Y'.toString()">
                and t33.material_sid is not null
            </if>
            <if test="isHasCreatedSku2 != null and isHasCreatedSku2 != '' and isHasCreatedSku2 == 'N'.toString()">
                and t33.material_sid is null
            </if>
            <if test="osbSampleBrand != null and osbSampleBrand != ''">
                and (<foreach collection="osbSampleBrand.split(';')" item="osbSampleBrand" separator="or">
                t.osb_sample_brand like concat('%', #{osbSampleBrand}, '%')</foreach>)
            </if>
            <if test="reimburseStatusList != null and reimburseStatusList.length >0 ">
                and t.reimburse_status in
                (<foreach collection="reimburseStatusList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="reimburseStatus != null and reimburseStatus != ''">
                and t.reimburse_status = #{reimburseStatus}
            </if>
            <if test="osbSampleBuyerList != null and osbSampleBuyerList.length >0 ">
                and t.osb_sample_buyer in
                (<foreach collection="osbSampleBuyerList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="osbSampleBuyer != null and osbSampleBuyer != ''">
                and t.osb_sample_buyer = #{osbSampleBuyer}
            </if>
            <if test="purchaseOrgList != null and purchaseOrgList.length >0 ">
                and t.purchase_org in
                (<foreach collection="purchaseOrgList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="purchaseOrg != null and purchaseOrg != ''">
                and t.purchase_org = #{purchaseOrg}
            </if>
            <if test="purchaseCompanyList != null and purchaseCompanyList.length >0 ">
                and t.purchase_company in
                (<foreach collection="purchaseCompanyList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="modelTypeList != null and modelTypeList.length >0 ">
                and t3.model_type in
                (<foreach collection="modelTypeList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="purchaseCompany != null and purchaseCompany != ''">
                and t.purchase_company = #{purchaseCompany}
            </if>
            <if test="buOperator != null and buOperator != ''">
                and t.bu_operator = #{buOperator}
            </if>
            <if test="buOperatorCustomer != null and buOperatorCustomer != ''">
                and (<foreach collection="buOperatorCustomer.split(';')" item="buOperatorCustomer" separator="or">
                t.bu_operator_customer like concat('%', #{buOperatorCustomer}, '%')</foreach>)
            </if>
            <if test="buOperatorVendor != null and buOperatorVendor != ''">
                and (<foreach collection="buOperatorVendor.split(';')" item="buOperatorVendor" separator="or">
                t.bu_operator_vendor like concat('%', #{buOperatorVendor}, '%')</foreach>)
            </if>
            <if test="buOperatorList != null and buOperatorList.length >0 ">
                and t.bu_operator in
                (<foreach collection="buOperatorList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="isCreateBom != null and isCreateBom != ''">
                and t.is_create_bom = #{isCreateBom}
            </if>
            <if test="isCreateFromSample != null and isCreateFromSample != ''">
                and t.is_create_from_sample = #{isCreateFromSample}
            </if>
            <if test="isCreateProductcost != null and isCreateProductcost != ''">
                and t.is_create_productcost = #{isCreateProductcost}
            </if>
            <if test="isCreateProductLine != null and isCreateProductLine != ''">
                and t.is_create_product_line = #{isCreateProductLine}
            </if>
            <if test="isHasCreatedBom != null and isHasCreatedBom != ''">
                and t.is_has_created_bom = #{isHasCreatedBom}
            </if>
            <if test="isHasCreatedProductcost != null and isHasCreatedProductcost != ''">
                and t.is_has_created_productcost = #{isHasCreatedProductcost}
            </if>
            <if test="isHasCreatedProductLine != null and isHasCreatedProductLine != ''">
                and t.is_has_created_product_line = #{isHasCreatedProductLine}
            </if>
            <if test="bomHandleStatus != null and bomHandleStatus != ''">
                and t.material_sid in (select DISTINCT(material_sid) from s_tec_bom_head WHERE handle_status = #{bomHandleStatus})
            </if>
            <if test="costHandleStatus != null and costHandleStatus != ''">
                and t.material_sid in (select DISTINCT(material_sid) from s_cos_product_cost WHERE handle_status = #{costHandleStatus})
            </if>
            <if test="clientId != null  and clientId != ''">
                <foreach collection="clientId.split(';')" item="item">or t.client_id like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="touseProduceStageList != null and touseProduceStageList.length >0">
                and t.touse_produce_stage in
                (<foreach collection="touseProduceStageList" item="touseProduceStage" separator=",">#{touseProduceStage}</foreach>)
            </if>
            <if test="touseProduceStage != null and touseProduceStage != ''">
                and t.touse_produce_stage = #{touseProduceStage}
            </if>
            <if test="isUploadZhizaodan != null and isUploadZhizaodan != ''">
                and t.is_upload_zhizaodan = #{isUploadZhizaodan}
            </if>
            <if test="isHasUploadedZhizaodan != null and isHasUploadedZhizaodan != ''">
                and t.is_has_uploaded_zhizaodan = #{isHasUploadedZhizaodan}
            </if>
            <if test="materialSidList != null and materialSidList.length > 0">
                and t.material_sid in
                (<foreach collection="materialSidList" item="materialSid" separator=",">#{materialSid}</foreach>)
            </if>
            <if test="materialCode != null and materialCode != ''">
                and (<foreach collection="materialCode.split(';')" item="materialCode" separator="or">t.material_code
                like concat('%', #{materialCode}, '%')</foreach>)
            </if>
            <if test="materialName != null and materialName != ''">
                and (<foreach collection="materialName.split(';')" item="materialName" separator="or">t.material_name
                like concat('%', #{materialName}, '%')</foreach>)
            </if>
            <if test="simpleCode != null and simpleCode != ''">
                and (<foreach collection="simpleCode.split(';')" item="simpleCode" separator="or">t.simple_code like
                concat('%', #{simpleCode}, '%')</foreach>)
            </if>
            <if test="productSeasonSid != null  and productSeasonSid != ''">
                and t.product_season_sid = #{productSeasonSid}
            </if>
            <if test="productSeasonSidList != null and productSeasonSidList.length >0 ">
                and t.product_season_sid in
                (<foreach collection="productSeasonSidList" item="productSeasonSid" separator=",">
                #{productSeasonSid}</foreach>)
            </if>
            <if test="zipperFlagList != null and zipperFlagList.length >0 ">
                and t.zipper_flag in
                (<foreach collection="zipperFlagList" item="zipperFlag" separator=",">
                #{zipperFlag}</foreach>)
            </if>
            <if test="sampleCodeCustomer != null and sampleCodeCustomer != ''">
                and (<foreach collection="sampleCodeCustomer.split(';')" item="sampleCodeCustomer" separator="or">
                t.sample_code_customer like
                concat('%', #{sampleCodeCustomer}, '%')</foreach>)
            </if>
            <if test="customerSid != null  and customerSid != ''">
                and t.customer_sid = #{customerSid}
            </if>
            <if test="customerSidList != null and customerSidList.length >0 ">
                and t.customer_sid in
                (<foreach collection="customerSidList" item="customerSid" separator=",">#{customerSid}</foreach>)
            </if>
            <if test="unitQuantity != null and unitQuantity != ''">
                and (<foreach collection="unitQuantity.split(';')" item="unitQuantity" separator="or">t.unit_quantity
                like concat('%', #{unitQuantity}, '%')</foreach>)
            </if>
            <if test="upDownSuit != null and upDownSuit != ''">
                and (<foreach collection="upDownSuit.split(';')" item="upDownSuit" separator="or">t.up_down_suit like
                concat('%', #{upDownSuit}, '%')</foreach>)
            </if>
            <if test="upDownSuitList != null  and upDownSuitList.length >0 ">
                and t.up_down_suit in
                (<foreach collection="upDownSuitList" item="upDownSuit" separator=",">#{upDownSuit}</foreach>)
            </if>
            <if test="rawMaterialMode != null and rawMaterialMode != ''">
                and (<foreach collection="rawMaterialMode.split(';')" item="rawMaterialMode" separator="or">
                t.raw_material_mode like concat('%', #{rawMaterialMode}, '%')</foreach>)
            </if>
            <if test="materialType != null and materialType != ''">
                and t.material_type = #{materialType}
            </if>
            <if test="radStatus != null and radStatus != ''">
                and t.rad_status = #{radStatus}
            </if>
            <if test="isPopularizeProduct != null and isPopularizeProduct != ''">
                and t.is_popularize_product = #{isPopularizeProduct}
            </if>
            <if test="materialTypeList != null  and materialTypeList.length >0 ">
                and t.material_type in
                (<foreach collection="materialTypeList" item="materialType" separator=",">#{materialType}</foreach>)
            </if>
            <if test="industryField != null  and industryField != ''">
                <foreach collection="industryField.split(';')" item="item">or t.industry_field like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="materialClassSid != null  and materialClassSid != ''">
                and t.material_class_sid = #{materialClassSid}
            </if>
            <if test="season != null  and season != ''">
                and t.season = #{season}
            </if>
            <if test="seasonList != null  and seasonList.length >0 ">
                and t.season in
                (<foreach collection="seasonList" item="season" separator=",">#{season}</foreach>)
            </if>
            <if test="supplierProductCode != null  and supplierProductCode != ''">
                and (<foreach collection="supplierProductCode.split(';')" item="item" separator="or">
                t.supplier_product_code like
                concat('%',#{item}, '%')
            </foreach>)
            </if>
            <if test="unitBase != null  and unitBase != ''">
                <foreach collection="unitBase.split(';')" item="item">or t.unit_base like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="yarnCount != null and yarnCount != ''">
                and (<foreach collection="yarnCount.split(';')" item="yarnCount" separator="or">t.yarn_count like
                concat('%', #{yarnCount}, '%')</foreach>)
            </if>
            <if test="density != null and density != ''">
                and (<foreach collection="density.split(';')" item="density" separator="or">t.density like concat('%',
                #{density}, '%')</foreach>)
            </if>
            <if test="composition != null and composition != ''">
                and (<foreach collection="composition.split(';')" item="composition" separator="or">t.composition like
                concat('%', #{composition}, '%')</foreach>)
            </if>
            <if test="purchaseType != null  and purchaseType != ''">
                and t.purchase_type = #{purchaseType}
            </if>
            <if test="purchaseTypeList != null  and purchaseTypeList.length >0 ">
                and t.purchase_type in
                (<foreach collection="purchaseTypeList" item="purchaseType" separator=",">#{purchaseType}</foreach>)
            </if>
            <if test="zipperMonth != null and zipperMonth != ''">
                and (<foreach collection="zipperMonth.split(';')" item="zipperMonth" separator="or">t.zipper_month like
                concat('%', #{zipperMonth}, '%')</foreach>)
            </if>
            <if test="zipperSize != null and zipperSize != ''">
                and t.zipper_size like concat('%', #{zipperSize}, '%')
            </if>
            <if test="materialComposition != null  and materialComposition != ''">
                and t.material_composition like concat('%', #{materialComposition}, '%')
            </if>
            <if test="vendorSid != null ">
                and t.vendor_sid = #{vendorSid}
            </if>
            <if test="vendorSidList != null  and vendorSidList.length >0 ">
                and t.vendor_sid in
                (<foreach collection="vendorSidList" item="vendorSid" separator=",">#{vendorSid}</foreach>)
            </if>
            <if test="upstreamSupplier != null  and upstreamSupplier != ''">
                <foreach collection="upstreamSupplier.split(';')" item="item">or t.upstream_supplier like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="developer != null and developer != ''">
                and (<foreach collection="developer.split(';')" item="developer" separator="or">t.developer like
                concat('%', #{developer}, '%')</foreach>)
            </if>
            <if test="weaveProcess != null  and weaveProcess != ''">
                <foreach collection="weaveProcess.split(';')" item="item">or t.weave_process like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="dyeType != null  and dyeType != ''">
                <foreach collection="dyeType.split(';')" item="item">or t.dye_type like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="width != null and width != ''">
                and (<foreach collection="width.split(';')" item="width" separator="or">t.width like concat('%',
                #{width}, '%')</foreach>)
            </if>
            <if test="gramWeight != null and gramWeight != ''">
                and (<foreach collection="gramWeight.split(';')" item="gramWeight" separator="or">t.gram_weight like
                concat('%', #{gramWeight}, '%')</foreach>)
            </if>
            <if test="specialFinishing != null  and specialFinishing != ''">
                <foreach collection="specialFinishing.split(';')" item="item">or t.special_finishing like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="modelSize != null and modelSize != ''">
                and (<foreach collection="modelSize.split(';')" item="modelSize" separator="or">t.model_size like
                concat('%', #{modelSize}, '%')</foreach>)
            </if>
            <if test="tagDesc != null  and tagDesc != ''">
                <foreach collection="tagDesc.split(';')" item="item">or t.tag_desc like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="processDesc != null  and processDesc != ''">
                <foreach collection="processDesc.split(';')" item="item">or t.process_desc like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="functionRemark != null  and functionRemark != ''">
                <foreach collection="functionRemark.split(';')" item="item">or t.function_remark like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="productSid != null  and productSid != ''">
                <foreach collection="productSid.split(';')" item="item">or t.product_sid like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="productCategory != null  and productCategory != ''">
                <foreach collection="productCategory.split(';')" item="item">or t.product_category like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="riskRemark != null  and riskRemark != ''">
                <foreach collection="riskRemark.split(';')" item="item">or t.risk_remark like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="isCompositeMaterial != null  and isCompositeMaterial != ''">
                <foreach collection="isCompositeMaterial.split(';')" item="item">or t.is_composite_material like
                    concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="calicoYarnDescription != null  and calicoYarnDescription != ''">
                <foreach collection="calicoYarnDescription.split(';')" item="item">or t.calico_yarn_description like
                    concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="specialCraft != null  and specialCraft != ''">
                <foreach collection="specialCraft.split(';')" item="item">or t.special_craft like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="selfDetectRemark != null  and selfDetectRemark != ''">
                <foreach collection="selfDetectRemark.split(';')" item="item">or t.self_detect_remark like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="zipperFlag != null  and zipperFlag != ''">
                <foreach collection="zipperFlag.split(';')" item="item">or t.zipper_flag like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="wpcRemindDays != null  and wpcRemindDays != ''">
                and t.wpc_remind_days like concat('%',#{wpcRemindDays}, '%')
            </if>
            <if test="materialCategory != null and materialCategory != ''">
                and t.material_category = #{materialCategory}
            </if>
            <if test="materialCategoryList != null and materialCategoryList.length >0 ">
                and t.material_category in
                (<foreach collection="materialCategoryList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="isSkuMaterial != null  and isSkuMaterial != ''">
                <foreach collection="isSkuMaterial.split(';')" item="item">or t.is_sku_material like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="isKuaifankuan != null and isKuaifankuan != ''">
                and t.is_kuaifankuan = #{isKuaifankuan}
            </if>
            <if test="skuDimension != null and skuDimension != ''">
                and t.sku_dimension = #{skuDimension}
            </if>
            <if test="sku1Type != null  and sku1Type != ''">
                <foreach collection="sku1Type.split(';')" item="item">or t.sku1_type like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="sku2Type != null  and sku2Type != ''">
                <foreach collection="sku2Type.split(';')" item="item">or t.sku2_type like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="priceType != null  and priceType != ''">
                <foreach collection="priceType.split(';')" item="item">or t.price_type like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="costType != null  and costType != ''">
                <foreach collection="costType.split(';')" item="item">or t.cost_type like concat('%',
                    #{item}, '%')
                </foreach>
            </if>

            <if test="sampleCodeSelf != null and sampleCodeSelf != ''">
                and (<foreach collection="sampleCodeSelf.split(';')" item="sampleCodeSelf" separator="or">
                t.sample_code_self like concat('%', #{sampleCodeSelf}, '%')</foreach>)
            </if>
            <if test="sampleCodeVendor != null  and sampleCodeVendor != ''">
                <foreach collection="sampleCodeVendor.split(';')" item="item">or t.sample_code_vendor like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="sampleCodeCustomer != null  and sampleCodeCustomer != ''">and t.sample_code_customer like
                concat('%',
                #{sampleCodeCustomer}, '%')
            </if>
            <if test="sampleCodeCustomer != null and sampleCodeCustomer != ''">
                and (<foreach collection="sampleCodeCustomer.split(';')" item="sampleCodeCustomer" separator="or">
                t.sample_code_customer like concat('%', #{sampleCodeCustomer}, '%')</foreach>)
            </if>
            <if test="retailPrice != null ">
                and t.retail_price = #{retailPrice}
            </if>
            <if test="customerProductCode != null and customerProductCode != ''">
                and (<foreach collection="customerProductCode.split(';')" item="customerProductCode" separator="or">
                t.customer_product_code like concat('%', #{customerProductCode}, '%')</foreach>)
            </if>
            <if test="cycleStage != null  and cycleStage != ''">
                <foreach collection="cycleStage.split(';')" item="item">or t.cycle_stage like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="companySid != null  and companySid != ''">
                and t.company_sid = #{companySid}
            </if>
            <if test="companySidList != null  and companySidList.length >0 ">
                and t.company_sid in
                (<foreach collection="companySidList" item="companySid" separator=",">#{companySid}</foreach>)
            </if>
            <if test="groupType != null  and groupType != ''">
                <foreach collection="groupType.split(';')" item="item">or t.group_type like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="designerAccount != null and designerAccount != ''">
                and (<foreach collection="designerAccount.split(';')" item="designerAccount" separator="or">
                t.designer_account like concat('%', #{designerAccount}, '%')</foreach>)
            </if>
            <if test="designerAccountName != null and designerAccountName != ''">
                and (<foreach collection="designerAccountName.split(';')" item="designerAccountName" separator="or">
                t24.nick_name like concat('%', #{designerAccountName}, '%')</foreach>)
            </if>
            <if test="designerAccountList != null  and designerAccountList.size() >0 ">
                and t.designer_account in (<foreach collection="designerAccountList" item="designerAccount" separator=",">#{designerAccount}</foreach>)
            </if>
            <if test="style != null  and style != ''">
                <foreach collection="style.split(';')" item="item">or t.style like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="styleList != null and styleList.length >0 ">
                and t.style in
                (<foreach collection="styleList" item="style" separator=",">#{style}</foreach>)
            </if>
            <if test="kuanTypeList != null and kuanTypeList.length >0 ">
                and t.kuan_type in
                (<foreach collection="kuanTypeList" item="kuanType" separator=",">#{kuanType}</foreach>)
            </if>
            <if test="series != null and series != ''">
                <foreach collection="series.split(';')" item="item">or t.series like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="kuanType != null  and kuanType != ''">
                <foreach collection="kuanType.split(';')" item="item">or t.kuan_type like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="styleDetail != null  and styleDetail != ''">
                <foreach collection="styleDetail.split(';')" item="item">or t.style_detail like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="seriesDetail != null  and seriesDetail != ''">
                <foreach collection="seriesDetail.split(';')" item="item">or t.series_detail like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="kuanTypeDetail != null  and kuanTypeDetail != ''">
                <foreach collection="kuanTypeDetail.split(';')" item="item">or t.kuan_type_detail like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="waveBand != null  and waveBand != ''">
                <foreach collection="waveBand.split(';')" item="item">or t.wave_band like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="projectSid != null  and projectSid != ''">
                <foreach collection="projectSid.split(';')" item="item">or t.project_sid like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="customerBrandSid != null ">
                and t.customer_brand_sid = #{customerBrandSid}
            </if>
            <if test="modelSid != null ">
                and t.model_sid in
                (<foreach collection="modelSid" item="modelSid" separator=",">
                #{modelSid}</foreach>)
            </if>
            <if test="modelSidList != null  and modelSidList.length >0 ">
                and t.model_sid in
                (<foreach collection="modelSidList" item="modelSid" separator=",">#{modelSid}</foreach>)
            </if>
            <if test="producePlantSid != null">
                and t.produce_plant_sid = #{producePlantSid}
            </if>
            <if test="producePlantSidList != null  and producePlantSidList.length >0 ">
                and t.produce_plant_sid in
                (<foreach collection="producePlantSidList" item="producePlantSid" separator=",">#{producePlantSid}</foreach>)
            </if>
            <if test="collarType != null  and collarType != ''">
                <foreach collection="collarType.split(';')" item="item">or t.collar_type like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="sleeveType != null  and sleeveType != ''">
                <foreach collection="sleeveType.split(';')" item="item">or t.sleeve_type like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="ageGroup != null  and ageGroup != ''">
                <foreach collection="ageGroup.split(';')" item="item">or t.age_group like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="inOutUnder != null  and inOutUnder != ''">
                <foreach collection="inOutUnder.split(';')" item="item">or t.in_out_under like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="topic != null  and topic != ''">
                <foreach collection="topic.split(';')" item="item">or t.topic like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="mainFabricType != null  and mainFabricType != ''">
                <foreach collection="mainFabricType.split(';')" item="item">or t.main_fabric_type like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="customerVendorCoopModel != null  and customerVendorCoopModel != ''">
                <foreach collection="customerVendorCoopModel.split(';')" item="item">or t.customer_vendor_coop_model
                    like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="priceGroup != null  and priceGroup != ''">
                <foreach collection="priceGroup.split(';')" item="item">or t.price_group like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="discountType != null  and discountType != ''">
                <foreach collection="discountType.split(';')" item="item">or t.discount_type like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="discountRate != null ">
                and t.discount_rate = #{discountRate}
            </if>
            <if test="productRouting != null ">
                and t.product_routing in
                (<foreach collection="productRouting" item="productRouting" separator=",">
                #{productRouting}</foreach>)
            </if>
            <if test="productType != null  and productType != ''">
                <foreach collection="productType.split(';')" item="item">or t.product_type like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="priceCostTax != null ">
                and t.price_cost_tax = #{priceCostTax}
            </if>
            <if test="costTargetTax != null ">
                and t.cost_target_tax = #{costTargetTax}
            </if>
            <if test="nationalStandardCode != null  and nationalStandardCode != ''">
                <foreach collection="nationalStandardCode.split(';')" item="item">or t.national_standard_code like
                    concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="featureTag != null  and featureTag != ''">
                <foreach collection="featureTag.split(';')" item="item">or t.feature_tag like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="dna != null  and dna != ''">
                <foreach collection="dna.split(';')" item="item">or t.dna like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="craft != null  and craft != ''">
                <foreach collection="craft.split(';')" item="item">or t.craft like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="patternFlower != null  and patternFlower != ''">
                <foreach collection="patternFlower.split(';')" item="item">or t.pattern_flower like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="specialType != null  and specialType != ''">
                <foreach collection="specialType.split(';')" item="item">or t.special_type like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="footMouth != null  and footMouth != ''">
                <foreach collection="footMouth.split(';')" item="item">or t.foot_mouth like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="sellPointDesc != null  and sellPointDesc != ''">
                <foreach collection="sellPointDesc.split(';')" item="item">or t.sell_point_desc like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="spreadType != null  and spreadType != ''">
                <foreach collection="spreadType.split(';')" item="item">or t.spread_type like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="spreadField != null  and spreadField != ''">
                <foreach collection="spreadField.split(';')" item="item">or t.spread_field like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="customerGroup != null  and customerGroup != ''">
                <foreach collection="customerGroup.split(';')" item="item">or t.customer_group like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="materialSidInitial != null ">
                and t.material_sid_initial = #{materialSidInitial}
            </if>
            <if test="sampleCodeSelfInitial != null  and sampleCodeSelfInitial != ''">
                <foreach collection="sampleCodeSelfInitial.split(';')" item="item">or t.sample_code_self_initial like
                    concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="waistHeight != null  and waistHeight != ''">
                <foreach collection="waistHeight.split(';')" item="item">or t.waist_height like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="elasticityIndex != null  and elasticityIndex != ''">
                <foreach collection="elasticityIndex.split(';')" item="item">or t.elasticity_index like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="thickIndex != null  and thickIndex != ''">
                <foreach collection="thickIndex.split(';')" item="item">or t.thick_index like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="odmOem != null  and odmOem != ''">
                <foreach collection="odmOem.split(';')" item="item">or t.odm_oem like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="businessChannel != null  and businessChannel != ''">
                <foreach collection="businessChannel.split(';')" item="item">or t.business_channel like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="maleFemaleFlag != null  and maleFemaleFlag != ''">
                <foreach collection="maleFemaleFlag.split(';')" item="item">or t.male_female_flag like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="grade != null  and grade != ''">
                <foreach collection="grade.split(';')" item="item">or t.grade like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="executiveStandard != null  and executiveStandard != ''">
                <foreach collection="executiveStandard.split(';')" item="item">or t.executive_standard like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="executiveStandardBottoms != null  and executiveStandardBottoms != ''">
                <foreach collection="executiveStandardBottoms.split(';')" item="item">or t.executive_standard_bottoms
                    like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="status != null  and status != ''">
                and t.status in (
                <foreach collection="status.split(';')" item="item" separator=",">
                    #{item}
                </foreach>
                )
            </if>
            <if test="handleStatus != null  and handleStatus != ''">
                and t.handle_status in (
                <foreach collection="handleStatus.split(';')" item="item" separator=",">
                    #{item}
                </foreach>
                )
            </if>
            <if test="handleStatusList != null  and handleStatusList.length >0 ">
                and t.handle_status in
                (<foreach collection="handleStatusList" item="handleStatus" separator=",">#{handleStatus}</foreach>)
            </if>
            <if test="creatorUserName != null and creatorUserName != ''">
                and t.creator_account = #{creatorUserName}
            </if>
            <if test="creatorAccount != null and creatorAccount != ''">
                and (<foreach collection="creatorAccount.split(';')" item="creatorAccount" separator="or">
                t20.nick_name like concat('%', #{creatorAccount}, '%')</foreach>)
            </if>
            <if test="beginTime != null and beginTime!=''">
                and date_format(t.create_date,'%y%m%d') &gt;= date_format(#{beginTime},'%y%m%d')
            </if>
            <if test="endTime != null and endTime!=''">
                and date_format(t.create_date,'%y%m%d') &lt;= date_format(#{endTime},'%y%m%d')
            </if>
            <if test="updaterAccount != null  and updaterAccount != ''">
                <foreach collection="updaterAccount.split(';')" item="item">or t.updater_account like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="updateDate != null ">
                and t.update_date = #{updateDate}
            </if>
            <if test="confirmerAccount != null  and confirmerAccount != ''">
                <foreach collection="confirmerAccount.split(';')" item="item">or t.confirmer_account like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="confirmDate != null ">
                and t.confirm_date = #{confirmDate}
            </if>
            <if test="dataSourceSys != null  and dataSourceSys != ''">
                <foreach collection="dataSourceSys.split(';')" item="item">or t.data_source_sys like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="safeCategory != null  and safeCategory != ''">
                <foreach collection="safeCategory.split(';')" item="item">or t.safe_category like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="productTechniqueType != null  and productTechniqueType != ''">
                <foreach collection="productTechniqueType.split(';')" item="item">or t.product_technique_type like
                    concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="companyBrandSid != null ">
                and t.company_brand_sid = #{companyBrandSid}
            </if>
            <if test="unitPrice != null  and unitPrice != ''">
                <foreach collection="unitPrice.split(';')" item="item">or t.unit_price like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="specificationSize != null and specificationSize != ''">
                and (<foreach collection="specificationSize.split(';')" item="specificationSize" separator="or">
                t.specification_size like concat('%', #{specificationSize}, '%')</foreach>)
            </if>
        </where>
        <if test="materialCategory != null and materialCategory == 'YP'">
            order by t.sample_code_self DESC
        </if>
        <if test="materialCategory == null or materialCategory != 'YP'">
            order by t.material_code DESC
        </if>
    </select>

    <select id="selectMaterialList" parameterType="com.platform.ems.domain.BasMaterial"
            resultType="com.platform.ems.domain.dto.response.BasMaterialDropDown">
        select t.material_sid, t.material_code, t.material_name
        from s_bas_material t
        <where>
            <if test="materialCategoryList != null and materialCategoryList.length >0">
                and t.material_category in
                (<foreach collection="materialCategoryList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="materialCategory != null and materialCategory != ''">
                and t.material_category = #{materialCategory}
            </if>
            <if test="materialCodeName != null and materialCodeName != ''">
                and (<foreach collection="materialCodeName.split(';')" item="materialCodeName" separator=" or ">
                t.material_code like concat('%', #{materialCodeName}, '%') or t.material_name like concat('%', #{materialCodeName}, '%')</foreach>)
            </if>
            <if test="vendorSid != null ">
                and t.vendor_sid = #{vendorSid}
            </if>
            <if test="vendorSidList != null  and vendorSidList.length >0 ">
                and t.vendor_sid in
                (<foreach collection="vendorSidList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="handleStatusList != null and handleStatusList.length >0">
                and t.handle_status in
                (<foreach collection="handleStatusList" item="item" separator=",">#{item}</foreach>)
            </if>
            <if test="handleStatus != null and handleStatus != ''">
                and t.handle_status = #{handleStatus}
            </if>
            <if test="status != null and status != ''">
                and t.status = #{status}
            </if>
        </where>
        order by t.material_code DESC
    </select>

    <!---->
    <insert id="inserts">
        insert into s_bas_material
        <trim prefix="(" suffix=")" suffixOverrides=",">
            client_id,
            material_sid,
            material_code,
            material_name,
            unit_quantity,
            up_down_suit,
            raw_material_mode,
            rad_status,
            is_popularize_product,
            material_type,
            industry_field,
            material_class_sid,
            big_class_sid,
            big_class_code,
            middle_class_sid,
            middle_class_code,
            small_class_sid,
            small_class_code,
            season,
            supplier_product_code,
            unit_base,
            yarn_count,
            density,
            composition,
            purchase_type,
            specification_size,
            zipper_month,
            zipper_size,
            material_composition,
            vendor_sid,
            upstream_supplier,
            developer,
            weave_process,
            dye_type,
            width,
            gram_weight,
            special_finishing,
            model_size,
            tag_desc,
            process_desc,
            function_remark,
            product_sid,
            product_category,
            risk_remark,
            is_composite_material,
            calico_yarn_description,
            special_craft,
            self_detect_remark,
            zipper_flag,
            material_category,
            is_sku_material,
            is_kuaifankuan,
            sku_dimension,
            sku1_type,
            sku2_type,
            sku1_group_sid,
            sku2_group_sid,
            sku1_group_code,
            sku2_group_code,
            inventory_price_method,
            inventory_standard_price,
            price_type,
            cost_type,
            sample_code_self,
            product_season_sid,
            sample_code_vendor,
            sample_code_customer,
            retail_price,
            customer_product_code,
            simple_code,
            cycle_stage,
            company_sid,
            group_type,
            designer_account,
            style,
            series,
            kuan_type,
            style_detail,
            series_detail,
            kuan_type_detail,
            wave_band,
            project_sid,
            customer_sid,
            model_sid,
            produce_plant_sid,
            produce_plant_code,
            collar_type,
            sleeve_type,
            age_group,
            in_out_under,
            topic,
            main_fabric_type,
            customer_vendor_coop_model,
            price_group,
            discount_type,
            discount_rate,
            product_routing,
            product_type,
            price_cost_tax,
            cost_target_tax,
            quote_price_tax,
            min_order_quantity,
            national_standard_code,
            feature_tag,
            dna,
            craft,
            pattern_flower,
            special_type,
            foot_mouth,
            sell_point_desc,
            spread_type,
            spread_field,
            customer_group,
            material_sid_initial,
            sample_code_self_initial,
            waist_height,
            elasticity_index,
            thick_index,
            odm_oem,
            business_channel,
            male_female_flag,
            grade,
            executive_standard,
            executive_standard_bottoms,
            picture_path,
            picture_path_second,
            remark,
            status,
            handle_status,
            wpc_remind_days,
            min_order_quantity,
            create_date,
            updater_account,
            update_date,
            confirmer_account,
            confirm_date,
            data_source_sys,
            safe_category,
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <foreach collection="list" item="o" separator=",">
                #{clientId},
                #{materialSid},
                #{materialCode},
                #{materialName},
                #{unitQuantity},
                #{upDownSuit},
                #{rawMaterialMode},
                #{materialType},
                #{industryField},
                #{materialClassSid},
                #{bigClassSid},
                #{bigClassCode},
                #{middleClassSid},
                #{middleClassCode},
                #{smallClassSid},
                #{smallClassCode},
                #{season},
                #{supplierProductCode},
                #{unitBase},
                #{yarnCount},
                #{density},
                #{composition},
                #{purchaseType},
                #{specificationSize},
                #{zipperMonth},
                #{zipperSize},
                #{materialComposition},
                #{vendorSid},
                #{upstreamSupplier},
                #{developer},
                #{weaveProcess},
                #{dyeType},
                #{width},
                #{gramWeight},
                #{specialFinishing},
                #{modelSize},
                #{tagDesc},
                #{processDesc},
                #{functionRemark},
                #{productSid},
                #{productCategory},
                #{riskRemark},
                #{isCompositeMaterial},
                #{calicoYarnDescription},
                #{specialCraft},
                #{selfDetectRemark},
                #{zipperFlag},
                #{materialCategory},
                #{isSkuMaterial},
                #{isKuaifankuan},
                #{skuDimension},
                #{sku1Type},
                #{sku2Type},
                #{sku1GroupSid},
                #{sku2GroupSid},
                #{sku1GroupCode},
                #{sku2GroupCode},
                #{inventoryPriceMethod},
                #{inventoryStandardPrice},
                #{priceType},
                #{costType},
                #{sampleCodeSelf},
                #{productSeasonSid},
                #{sampleCodeVendor},
                #{sampleCodeCustomer},
                #{retailPrice},
                #{customerProductCode},
                #{simpleCode},
                #{cycleStage},
                #{companySid},
                #{groupType},
                #{designerAccount},
                #{style},
                #{series},
                #{kuanType},
                #{styleDetail},
                #{seriesDetail},
                #{kuanTypeDetail},
                #{waveBand},
                #{projectSid},
                #{customerSid},
                #{modelSid},
                #{producePlantSid},
                #{producePlantCode},
                #{collarType},
                #{sleeveType},
                #{ageGroup},
                #{inOutUnder},
                #{topic},
                #{mainFabricType},
                #{customerVendorCoopModel},
                #{priceGroup},
                #{discountType},
                #{discountRate},
                #{productRouting},
                #{productType},
                #{priceCostTax},
                #{costTargetTax},
                #{quotePriceTax},
                #{minOrderQuantity},
                #{nationalStandardCode},
                #{featureTag},
                #{dna},
                #{craft},
                #{patternFlower},
                #{specialType},
                #{footMouth},
                #{sellPointDesc},
                #{spreadType},
                #{spreadField},
                #{customerGroup},
                #{materialSidInitial},
                #{sampleCodeSelfInitial},
                #{waistHeight},
                #{elasticityIndex},
                #{thickIndex},
                #{odmOem},
                #{businessChannel},
                #{maleFemaleFlag},
                #{grade},
                #{executiveStandard},
                #{executiveStandardBottoms},
                #{picturePath},
                #{picturePathSecond},
                #{remark},
                #{status},
                #{handleStatus},
                #{wpcRemindDays},
                #{minOrderQuantity},
                #{creatorAccount},
                #{createDate},
                #{updaterAccount},
                #{updateDate},
                #{confirmerAccount},
                #{confirmDate},
                #{dataSourceSys},
                #{safeCategory},
            </foreach>
        </trim>
    </insert>

    <!---->
    <update id="updateAllById">
        update s_bas_material
        <trim prefix="SET" suffixOverrides=",">
            material_code = #{materialCode},
            material_name = #{materialName},
            unit_quantity = #{unitQuantity},
            up_down_suit = #{upDownSuit},
            raw_material_mode = #{rawMaterialMode},
            rad_status = #{radStatus},
            is_popularize_product = #{isPopularizeProduct},
            material_type = #{materialType},
            industry_field = #{industryField},
            material_class_sid = #{materialClassSid},
            big_class_sid = #{bigClassSid},
            big_class_code = #{bigClassCode},
            middle_class_sid = #{middleClassSid},
            middle_class_code = #{middleClassCode},
            small_class_sid = #{smallClassSid},
            small_class_code = #{smallClassCode},
            season = #{season},
            supplier_product_code = #{supplierProductCode},
            unit_base = #{unitBase},
            unit_price = #{unitPrice},
            unit_quantity = #{unitQuantity},
            unit_recursion = #{unitRecursion},
            unit_conversion_rate_price = #{unitConversionRatePrice},
            yarn_count = #{yarnCount},
            density = #{density},
            composition = #{composition},
            purchase_type = #{purchaseType},
            specification_size = #{specificationSize},
            zipper_month = #{zipperMonth},
            zipper_size = #{zipperSize},
            material_composition = #{materialComposition},
            vendor_sid = #{vendorSid},
            upstream_supplier = #{upstreamSupplier},
            developer = #{developer},
            weave_process = #{weaveProcess},
            dye_type = #{dyeType},
            width = #{width},
            gram_weight = #{gramWeight},
            special_finishing = #{specialFinishing},
            model_size = #{modelSize},
            tag_desc = #{tagDesc},
            process_desc = #{processDesc},
            function_remark = #{functionRemark},
            product_sid = #{productSid},
            product_category = #{productCategory},
            risk_remark = #{riskRemark},
            is_composite_material = #{isCompositeMaterial},
            calico_yarn_description = #{calicoYarnDescription},
            special_craft = #{specialCraft},
            self_detect_remark = #{selfDetectRemark},
            zipper_flag = #{zipperFlag},
            material_category = #{materialCategory},
            is_sku_material = #{isSkuMaterial},
            is_kuaifankuan = #{isKuaifankuan},
            sku_dimension = #{skuDimension},
            sku1_type = #{sku1Type},
            sku2_type = #{sku2Type},
            sku1_group_sid = #{sku1GroupSid},
            sku2_group_sid = #{sku2GroupSid},
            sku1_group_code = #{sku1GroupCode},
            sku2_group_code = #{sku2GroupCode},
            inventory_price_method = #{inventoryPriceMethod},
            inventory_standard_price = #{inventoryStandardPrice},
            price_type = #{priceType},
            cost_type = #{costType},
            sample_code_self = #{sampleCodeSelf},
            product_season_sid = #{productSeasonSid},
            process_sid = #{processSid},
            sample_code_vendor = #{sampleCodeVendor},
            sample_code_customer = #{sampleCodeCustomer},
            retail_price = #{retailPrice},
            customer_product_code = #{customerProductCode},
            simple_code = #{simpleCode},
            cycle_stage = #{cycleStage},
            company_sid = #{companySid},
            company_brand_sid = #{companyBrandSid},
            group_type = #{groupType},
            designer_account = #{designerAccount},
            style = #{style},
            series = #{series},
            kuan_type = #{kuanType},
            style_detail = #{styleDetail},
            series_detail = #{seriesDetail},
            kuan_type_detail = #{kuanTypeDetail},
            wave_band = #{waveBand},
            project_sid = #{projectSid},
            customer_sid = #{customerSid},
            customer_brand_sid = #{customerBrandSid},
            model_sid = #{modelSid},
            produce_plant_sid = #{producePlantSid},
            produce_plant_code = #{producePlantCode},
            collar_type = #{collarType},
            sleeve_type = #{sleeveType},
            age_group = #{ageGroup},
            in_out_under = #{inOutUnder},
            topic = #{topic},
            main_fabric_type = #{mainFabricType},
            customer_vendor_coop_model = #{customerVendorCoopModel},
            price_group = #{priceGroup},
            discount_type = #{discountType},
            discount_rate = #{discountRate},
            product_routing = #{productRouting},
            product_type = #{productType},
            price_cost_tax = #{priceCostTax},
            cost_target_tax = #{costTargetTax},
            quote_price_tax = #{quotePriceTax},
            min_order_quantity = #{minOrderQuantity},
            national_standard_code = #{nationalStandardCode},
            feature_tag = #{featureTag},
            dna = #{dna},
            craft = #{craft},
            pattern_flower = #{patternFlower},
            special_type = #{specialType},
            foot_mouth = #{footMouth},
            sell_point_desc = #{sellPointDesc},
            spread_type = #{spreadType},
            spread_field = #{spreadField},
            customer_group = #{customerGroup},
            material_sid_initial = #{materialSidInitial},
            sample_code_self_initial = #{sampleCodeSelfInitial},
            waist_height = #{waistHeight},
            elasticity_index = #{elasticityIndex},
            thick_index = #{thickIndex},
            odm_oem = #{odmOem},
            business_channel = #{businessChannel},
            male_female_flag = #{maleFemaleFlag},
            grade = #{grade},
            executive_standard = #{executiveStandard},
            executive_standard_bottoms = #{executiveStandardBottoms},
            picture_path = #{picturePath},
            picture_path_second = #{picturePathSecond},
            is_upload_zhizaodan = #{isUploadZhizaodan},
            is_has_uploaded_zhizaodan = #{isHasUploadedZhizaodan},
            zhizaodan_upload_date = #{zhizaodanUploadDate},
            touse_produce_stage = #{touseProduceStage},
            product_plan_sid = #{productPlanSid},
            touse_produce_stage = #{touseProduceStage},
            osb_sample_buyer = #{osbSampleBuyer},
            purchase_date = #{purchaseDate},
            purchase_company = #{purchaseCompany},
            purchase_org = #{purchaseOrg},
            purchase_from = #{purchaseFrom},
            osb_sample_brand = #{osbSampleBrand},
            osb_sample_code = #{osbSampleCode},
            osb_sample_color = #{osbSampleColor},
            osb_sample_size = #{osbSampleSize},
            purchase_price = #{purchasePrice},
            currency = #{currency},
            currency_unit = #{currencyUnit},
            purchase_quantity = #{purchaseQuantity},
            reimburse_status = #{reimburseStatus},
            is_create_bom = #{isCreateBom},
            is_create_from_sample = #{isCreateFromSample},
            is_create_productcost = #{isCreateProductcost},
            is_create_product_line = #{isCreateProductLine},
            is_has_created_bom = #{isHasCreatedBom},
            is_has_created_productcost = #{isHasCreatedProductcost},
            is_has_created_product_line = #{isHasCreatedProductLine},
            bu_operator = #{buOperator},
            bu_operator_vendor = #{buOperatorVendor},
            bu_operator_customer = #{buOperatorCustomer},
            remark = #{remark},
            status = #{status},
            handle_status = #{handleStatus},
            wpc_remind_days = #{wpcRemindDays},
            creator_account = #{creatorAccount},
            create_date = #{createDate},
            updater_account = #{updaterAccount},
            update_date = #{updateDate},
            confirmer_account = #{confirmerAccount},
            confirm_date = #{confirmDate},
            data_source_sys = #{dataSourceSys},
            safe_category = #{safeCategory},
            product_technique_type = #{productTechniqueType},
            manual_material_code = #{manualMaterialCode},
            unit_conversion_rate = #{unitConversionRate},
        </trim>
        where material_sid = #{materialSid}
    </update>

    <!---->
    <update id="updatesAllById">
        <foreach collection="list" item="o" separator=";">
            update s_bas_material
            <trim prefix="SET" suffixOverrides=",">
                material_code = #{materialCode},
                material_name = #{materialName},
                unit_quantity = #{unitQuantity},
                up_down_suit = #{upDownSuit},
                raw_material_mode = #{rawMaterialMode},
                rad_status = #{radStatus},
                is_popularize_product = #{isPopularizeProduct},
                material_type = #{materialType},
                industry_field = #{industryField},
                material_class_sid = #{materialClassSid},
                big_class_sid = #{bigClassSid},
                big_class_code = #{bigClassCode},
                middle_class_sid = #{middleClassSid},
                middle_class_code = #{middleClassCode},
                small_class_sid = #{smallClassSid},
                small_class_code = #{smallClassCode},
                season = #{season},
                supplier_product_code = #{supplierProductCode},
                unit_base = #{unitBase},
                yarn_count = #{yarnCount},
                density = #{density},
                composition = #{composition},
                purchase_type = #{purchaseType},
                specification_size = #{specificationSize},
                zipper_month = #{zipperMonth},
                zipper_size = #{zipperSize},
                material_composition = #{materialComposition},
                vendor_sid = #{vendorSid},
                upstream_supplier = #{upstreamSupplier},
                developer = #{developer},
                weave_process = #{weaveProcess},
                dye_type = #{dyeType},
                width = #{width},
                gram_weight = #{gramWeight},
                special_finishing = #{specialFinishing},
                model_size = #{modelSize},
                tag_desc = #{tagDesc},
                process_desc = #{processDesc},
                function_remark = #{functionRemark},
                product_sid = #{productSid},
                product_category = #{productCategory},
                risk_remark = #{riskRemark},
                is_composite_material = #{isCompositeMaterial},
                calico_yarn_description = #{calicoYarnDescription},
                special_craft = #{specialCraft},
                self_detect_remark = #{selfDetectRemark},
                zipper_flag = #{zipperFlag},
                material_category = #{materialCategory},
                is_sku_material = #{isSkuMaterial},
                is_kuaifankuan = #{isKuaifankuan},
                sku_dimension = #{skuDimension},
                sku1_type = #{sku1Type},
                sku2_type = #{sku2Type},
                sku1_group_sid = #{sku1GroupSid},
                sku2_group_sid = #{sku2GroupSid},
                sku1_group_code = #{sku1GroupCode},
                sku2_group_code = #{sku2GroupCode},
                inventory_price_method = #{inventoryPriceMethod},
                inventory_standard_price = #{inventoryStandardPrice},
                price_type = #{priceType},
                cost_type = #{costType},
                sample_code_self = #{sampleCodeSelf},
                product_season_sid = #{productSeasonSid},
                sample_code_vendor = #{sampleCodeVendor},
                sample_code_customer = #{sampleCodeCustomer},
                retail_price = #{retailPrice},
                customer_product_code = #{customerProductCode},
                simple_code = #{simpleCode},
                cycle_stage = #{cycleStage},
                company_sid = #{companySid},
                group_type = #{groupType},
                designer_account = #{designerAccount},
                style = #{style},
                series = #{series},
                kuan_type = #{kuanType},
                style_detail = #{styleDetail},
                series_detail = #{seriesDetail},
                kuan_type_detail = #{kuanTypeDetail},
                wave_band = #{waveBand},
                project_sid = #{projectSid},
                customer_sid = #{customerSid},
                model_sid = #{modelSid},
                produce_plant_sid = #{producePlantSid},
                produce_plant_code = #{producePlantCode},
                collar_type = #{collarType},
                sleeve_type = #{sleeveType},
                age_group = #{ageGroup},
                in_out_under = #{inOutUnder},
                topic = #{topic},
                main_fabric_type = #{mainFabricType},
                customer_vendor_coop_model = #{customerVendorCoopModel},
                price_group = #{priceGroup},
                discount_type = #{discountType},
                discount_rate = #{discountRate},
                product_routing = #{productRouting},
                product_type = #{productType},
                price_cost_tax = #{priceCostTax},
                cost_target_tax = #{costTargetTax},
                quote_price_tax = #{quotePriceTax},
                min_order_quantity = #{minOrderQuantity},
                national_standard_code = #{nationalStandardCode},
                feature_tag = #{featureTag},
                dna = #{dna},
                craft = #{craft},
                pattern_flower = #{patternFlower},
                special_type = #{specialType},
                foot_mouth = #{footMouth},
                sell_point_desc = #{sellPointDesc},
                spread_type = #{spreadType},
                spread_field = #{spreadField},
                customer_group = #{customerGroup},
                material_sid_initial = #{materialSidInitial},
                sample_code_self_initial = #{sampleCodeSelfInitial},
                waist_height = #{waistHeight},
                elasticity_index = #{elasticityIndex},
                thick_index = #{thickIndex},
                odm_oem = #{odmOem},
                business_channel = #{businessChannel},
                male_female_flag = #{maleFemaleFlag},
                grade = #{grade},
                executive_standard = #{executiveStandard},
                executive_standard_bottoms = #{executiveStandardBottoms},
                picture_path = #{picturePath},
                picture_path_second = #{picturePathSecond},
                is_upload_zhizaodan = #{isUploadZhizaodan},
                is_has_uploaded_zhizaodan = #{isHasUploadedZhizaodan},
                zhizaodan_upload_date = #{zhizaodanUploadDate},
                touse_produce_stage = #{touseProduceStage},
                remark = #{remark},
                status = #{status},
                handle_status = #{handleStatus},
                wpc_remind_days = #{wpcRemindDays},
                creator_account = #{creatorAccount},
                create_date = #{createDate},
                updater_account = #{updaterAccount},
                update_date = #{updateDate},
                confirmer_account = #{confirmerAccount},
                confirm_date = #{confirmDate},
                data_source_sys = #{dataSourceSys},
                safe_category = #{safeCategory},
                manual_material_code = #{manualMaterialCode},
                unit_conversion_rate = #{unitConversionRate},
            </trim>
            where material_sid = #{materialSid}
        </foreach>
    </update>

    <select id="selectMaterialSidByCode" parameterType="String" resultType="String">
        select t.material_sid  from  s_bas_material t
        where t.material_code = #{materialCode}
    </select>

    <delete id="deleteBasMaterialByIds" parameterType="java.lang.Long">
        delete from s_bas_material where material_sid in
        <foreach item="materialSid" collection="array" open="(" separator="," close=")">
            #{materialSid}
        </foreach>
    </delete>

    <select id="countByDomain" resultType="java.lang.Integer">
        select count(1) from s_bas_material
        <where>
            <if test="materialSid != null  and materialSid != ''">
                and material_sid in (
                <foreach collection="materialSid" item="item" separator=",">
                    #{item}
                </foreach>
                )
            </if>
            <if test="handleStatus != null  and handleStatus != ''">
                and handle_status in (
                <foreach collection="handleStatus.split(';')" item="item" separator=",">
                    #{item}
                </foreach>
                )
            </if>
        </where>
    </select>

    <select id="checkCodeUnique" resultType="java.lang.Integer">
        select count(*) from s_bas_material where material_code = #{materialCode} limit 1
    </select>

    <select id="checkNameUnique" resultType="java.lang.Integer">
        select count(*) from s_bas_material where material_name = #{materialName} and material_category = #{materialCategory} limit 1
    </select>

    <select id="selectBasMaterialByCode" resultMap="BasMaterialResult">
        <include refid="selectBasMaterialVo"/>
        where t.material_code = #{materialCode} limit 1
    </select>

    <update id="confirm" parameterType="com.platform.ems.domain.BasMaterial">
        update s_bas_material
        <set>
            <if test="handleStatus != null and handleStatus != ''">handle_status = #{handleStatus},</if>
            <if test="wpcRemindDays != null and wpcRemindDays != ''">wpc_remind_days = #{wpcRemindDays},</if>
            <if test="status != null and status != ''">status = #{status},</if>
            <if test="disableRemark != null and disableRemark != ''">disable_remark = #{disableRemark},</if>
            <if test="confirmerAccount != null and confirmerAccount != ''">confirmer_account = #{confirmerAccount},</if>
            <if test="confirmDate != null">confirm_date = #{confirmDate},</if>
        </set>
        where material_sid in
        (<foreach collection="materialSidList" item="materialSid" separator=",">#{materialSid}</foreach>)
    </update>

    <sql id="getMaterialRequireList">
       SELECT
       t.material_sid,
       t.material_code,
	   t.material_name,
	   t2.sku_code AS sku1_code,
	   t2.sku_name AS sku1_name,
	   t3.sku_code AS sku2_code,
	   t3.sku_name AS sku2_name,
       t.min_order_quantity,
	   t.unit_base,
	   t.purchase_type,
	   t.vendor_sid,
	   t4.vendor_code,
	   t4.vendor_name,
	   t.supplier_product_code,
	   t.material_type,
	   t.material_class_sid,
       t.big_class_sid,
       t.big_class_code,
       t.middle_class_sid,
       t.middle_class_code,
       t.small_class_sid,
       t.small_class_code,
	   t5.node_name,
	   t6.sales_order_item_sid,
	   t6.sales_order_sid,
	   t7.sales_order_code,
	   t8.confirm_quantity,
	   t.companyBrandMarkSid,
	   t.customerBrandMarkSid,
	   t9.bom_sid
  FROM s_bas_material t
	  LEFT JOIN s_bas_vendor t4 ON t4.vendor_sid = t.vendor_sid
	  LEFT JOIN s_con_material_class t5 ON t5.material_class_sid = t.material_class_sid
	  LEFT JOIN s_sal_sales_order_item t6 ON t6.material_sid = t.material_sid
	  LEFT JOIN s_bas_sku t2 ON t2.sku_sid = t6.sku1_sid
	  LEFT JOIN s_bas_sku t3 ON t3.sku_sid = t6.sku2_sid
	  LEFT JOIN s_sal_sales_order t7 ON t7.sales_order_sid = t6.sales_order_sid
	  LEFT JOIN s_tec_bom_head t9 ON t9.material_sid = t.material_sid
	  LEFT JOIN s_tec_bom_item t8 ON t8.bom_sid = t9.bom_sid
    </sql>
    <select id="selectTecBomItemList" parameterType="com.platform.ems.domain.TecBomHead"
            resultType="com.platform.ems.domain.TecBomItem">
        <include refid="getMaterialRequireList"/>
        where t9.material_sid = #{materialSid}
    </select>

    <select id="selectNotGydList" parameterType="com.platform.ems.domain.BasMaterial" resultType="com.platform.ems.domain.BasMaterial">
        SELECT
            t.client_id,
            t.material_sid,
            t.material_code,
            t.material_name,
            t.material_category,
            t.cycle_stage,
            t.male_female_flag,
            t.min_order_quantity,
            t.is_has_uploaded_zhizaodan,
            t.zhizaodan_upload_date,
            t.is_upload_zhizaodan,
            t.touse_produce_stage,
            t14.name AS touse_produce_stage_name,
            t15.customer_name,
            t.status,
            t.handle_status,
            t.wpc_remind_days,
            t.remark,
            t.product_season_sid,
            t9.product_season_name,
            t.model_sid,
            t10.model_code,
            t10.model_name,
            t.product_technique_type,
            t11.name AS product_technique_type_name,
            t.material_type,
            t5.name AS material_type_name,
            t.industry_field,
            t.material_class_sid,
            t.big_class_sid,
            t.big_class_code,
            t.middle_class_sid,
            t.middle_class_code,
            t.small_class_sid,
            t.small_class_code,
            t6.node_name AS material_class_name,
            t.up_down_suit,
            t.raw_material_mode,
            t.unit_base,
            t7.name AS unit_base_name,
            t.purchase_type,
            t8.name AS purchase_type_name,
            t.unit_quantity,
            t12.name AS unit_quantity_name,
            t.unit_price,
            t13.name AS unit_price_name,
            t.creator_account,
            t3.nick_name AS creator_account_name,
            t.create_date,
            t.confirmer_account,
            t4.nick_name AS confirmer_account_name,
            t.confirm_date,
            t.data_source_sys,
            t.sample_code_self,
            t.designer_account,
            t16.nick_name AS designer_account_name
        FROM s_bas_material t
                 LEFT JOIN sys_user t3 ON t.creator_account = t3.user_name
                 LEFT JOIN sys_user t4 ON t.confirmer_account = t4.user_name
                 LEFT JOIN s_con_material_type t5 ON t.material_type = t5.code
                 LEFT JOIN s_con_material_class t6 ON t.material_class_sid = t6.material_class_sid
                 LEFT JOIN s_con_measure_unit t7 ON t.unit_base = t7.code
                 LEFT JOIN s_con_purchase_type t8 ON t.purchase_type = t8.code
                 LEFT JOIN s_bas_product_season t9 ON t.product_season_sid = t9.product_season_sid
                 LEFT JOIN s_tec_model t10 ON t.model_sid = t10.model_sid
                 LEFT JOIN s_con_product_technique_type t11 ON t.product_technique_type = t11.code
                 LEFT JOIN s_con_measure_unit t12 ON t.unit_quantity = t12.code
                 LEFT JOIN s_con_measure_unit t13 ON t.unit_price = t13.code
                 LEFT JOIN s_con_produce_stage t14 ON t.touse_produce_stage = t14.code
                 LEFT JOIN s_bas_customer t15 ON t.customer_sid = t15.customer_sid
                 LEFT JOIN sys_user t16 ON t.designer_account = t16.user_name
        <where>
            <if test="clientId != null  and clientId != ''">
                <foreach collection="clientId.split(';')" item="item">or t.client_id like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="touseProduceStageList != null and touseProduceStageList.length >0">
                and t.touse_produce_stage in
                (<foreach collection="touseProduceStageList" item="touseProduceStage" separator=",">#{touseProduceStage}</foreach>)
            </if>
            <if test="fileType != null and fileType != '' and isHasUploadedZhizaodan == 'N'.toString() and handleStatus != null and handleStatus != ''">
                and t.material_sid NOT IN(
                SELECT t1.material_sid from s_bas_material_attachment t1
                LEFT JOIN s_bas_material t2 ON t1.material_sid = t2.material_sid
                WHERE t1.file_type = #{fileType} AND t2.handle_status = #{handleStatus})
            </if>
            <if test="fileType != null and fileType != '' and isHasUploadedZhizaodan == 'Y'.toString() and handleStatus != null and handleStatus != ''">
                and t.material_sid IN(
                SELECT t1.material_sid from s_bas_material_attachment t1
                LEFT JOIN s_bas_material t2 ON t1.material_sid = t2.material_sid
                WHERE t1.file_type = #{fileType} AND t2.handle_status = #{handleStatus})
            </if>
            <if test="materialCategory != null and materialCategory != ''">
                and t.material_category = #{materialCategory}
            </if>
            <if test="isUploadZhizaodan != null and isUploadZhizaodan != ''">
                and t.is_upload_zhizaodan = #{isUploadZhizaodan}
            </if>
            <if test="status != null and status != ''">
                and t.status = #{status}
            </if>
            <if test="handleStatus != null and handleStatus != ''">
                and t.handle_status = #{handleStatus}
            </if>
            <if test="creatorAccount != null and creatorAccount != ''">
                and (<foreach collection="creatorAccount.split(';')" item="creatorAccount" separator="or">
                t3.nick_name like concat('%', #{creatorAccount}, '%')</foreach>)
            </if>
            <if test="beginTime != null and beginTime!=''">
                and date_format(t.create_date,'%y%m%d') &gt;= date_format(#{beginTime},'%y%m%d')
            </if>
            <if test="endTime != null and endTime!=''">
                and date_format(t.create_date,'%y%m%d') &lt;= date_format(#{endTime},'%y%m%d')
            </if>
            <if test="updaterAccount != null  and updaterAccount != ''">
                <foreach collection="updaterAccount.split(';')" item="item">or t.updater_account like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="updateDate != null ">
                and t.update_date = #{updateDate}
            </if>
            <if test="confirmerAccount != null  and confirmerAccount != ''">
                <foreach collection="confirmerAccount.split(';')" item="item">or t.confirmer_account like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
            <if test="confirmDate != null ">
                and t.confirm_date = #{confirmDate}
            </if>
            <if test="dataSourceSys != null  and dataSourceSys != ''">
                <foreach collection="dataSourceSys.split(';')" item="item">or t.data_source_sys like concat('%',
                    #{item}, '%')
                </foreach>
            </if>
        </where>
    </select>

    <select id="getName" parameterType="com.platform.ems.domain.BasMaterial" resultType="com.platform.ems.domain.BasMaterial">
        SELECT
            t.material_name from s_bas_material t
        WHERE t.material_sid = #{materialSid}
    </select>
</mapper>
